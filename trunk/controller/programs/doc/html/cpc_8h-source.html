<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ERAEmbeddedRobotArmProject: cpc.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>cpc.h</h1><a href="cpc_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*                                                                              </span>
<a name="l00003"></a>00003 <span class="comment">*      Copyright (c) 2000, 2001, 2002-2005 by EMS Dr. Thomas Wuensche               </span>
<a name="l00004"></a>00004 <span class="comment">*                                                                              </span>
<a name="l00005"></a>00005 <span class="comment">*                  - All rights reserved -                                     </span>
<a name="l00006"></a>00006 <span class="comment">*                                                                              </span>
<a name="l00007"></a>00007 <span class="comment">* This code is provided "as is" without warranty of any kind, either           </span>
<a name="l00008"></a>00008 <span class="comment">* expressed or implied, including but not limited to the liability             </span>
<a name="l00009"></a>00009 <span class="comment">* concerning the freedom from material defects, the fitness for parti-         </span>
<a name="l00010"></a>00010 <span class="comment">* cular purposes or the freedom of proprietary rights of third parties.        </span>
<a name="l00011"></a>00011 <span class="comment">*                                                                              </span>
<a name="l00012"></a>00012 <span class="comment">****************************************************************************</span>
<a name="l00013"></a>00013 <span class="comment">* Module name.: --                                                            </span>
<a name="l00014"></a>00014 <span class="comment">****************************************************************************</span>
<a name="l00015"></a>00015 <span class="comment">* Include file: none                                                           </span>
<a name="l00016"></a>00016 <span class="comment">****************************************************************************</span>
<a name="l00017"></a>00017 <span class="comment">* Project.....: Windows/Linux Driver Development Kit                           </span>
<a name="l00018"></a>00018 <span class="comment">* Filename....: cpc.h                                                          </span>
<a name="l00019"></a>00019 <span class="comment">* Authors.....: Dr. Thomas Wuensche [TW]</span>
<a name="l00020"></a>00020 <span class="comment">*               Gerhard Uttenthaler [GU]</span>
<a name="l00021"></a>00021 <span class="comment">*               Christian Schoett   [CS]</span>
<a name="l00022"></a>00022 <span class="comment">*               Sebastian Haas      [SH]</span>
<a name="l00023"></a>00023 <span class="comment">****************************************************************************</span>
<a name="l00024"></a>00024 <span class="comment">* Short descr.: General header file for the CPC interface library                  </span>
<a name="l00025"></a>00025 <span class="comment">****************************************************************************</span>
<a name="l00026"></a>00026 <span class="comment">* Description.: declares all variables, structures and functions needed       </span>
<a name="l00027"></a>00027 <span class="comment">*               for the communication between application software and         </span>
<a name="l00028"></a>00028 <span class="comment">*               the CPC interfaces library                                     </span>
<a name="l00029"></a>00029 <span class="comment">****************************************************************************</span>
<a name="l00030"></a>00030 <span class="comment">*                            History                                          </span>
<a name="l00031"></a>00031 <span class="comment">****************************************************************************</span>
<a name="l00032"></a>00032 <span class="comment">* Version  Date        Author  Remark                                          </span>
<a name="l00033"></a>00033 <span class="comment">*                                                                              </span>
<a name="l00034"></a>00034 <span class="comment">* 01.00    ??          TW/GU                                                   </span>
<a name="l00035"></a>00035 <span class="comment">* 01.10    ??          TW/GU                                                   </span>
<a name="l00036"></a>00036 <span class="comment">* 01.20    ??          TW/GU                                                   </span>
<a name="l00037"></a>00037 <span class="comment">* 01.30    ??          TW/GU                                                   </span>
<a name="l00038"></a>00038 <span class="comment">* 01.40    03.01.2001  CS      - modifications for the new driver concept        </span>
<a name="l00039"></a>00039 <span class="comment">*                              - added support for CAN 2.0B                      </span>
<a name="l00040"></a>00040 <span class="comment">* 01.50    04.02.2001  CS      - added support for the CPC-PCI interface         </span>
<a name="l00041"></a>00041 <span class="comment">* 01.60    22.08.2001  CS      - added support for the CPC-PP/Eco interface                             </span>
<a name="l00042"></a>00042 <span class="comment">* 01.61    10.10.2001  CS      - fixed some minor bugs                           </span>
<a name="l00043"></a>00043 <span class="comment">* 01.62    24.01.2002  CS      - added pragmas for the structure byte alignment  </span>
<a name="l00044"></a>00044 <span class="comment">*                              - inserted an additional variable into the        </span>
<a name="l00045"></a>00045 <span class="comment">*                                CPC_MSG structure for confirmed requests        </span>
<a name="l00046"></a>00046 <span class="comment">*                              - inserted an additional variable into all        </span>
<a name="l00047"></a>00047 <span class="comment">*                                requesting functions                            </span>
<a name="l00048"></a>00048 <span class="comment">* 01.70    02.04.2002  CS      - complete review of the structures and functions </span>
<a name="l00049"></a>00049 <span class="comment">* 01.71    25.04.2002  GU      - library function prototypes now in cpclib.h     </span>
<a name="l00050"></a>00050 <span class="comment">* 01.72    26.02.2003  GU      - support for M16C internal CAN controller in     </span>
<a name="l00051"></a>00051 <span class="comment">*                                basic CAN mode                                  </span>
<a name="l00052"></a>00052 <span class="comment">* 01.73    07.10.2004  GU      - introduced new message types:</span>
<a name="l00053"></a>00053 <span class="comment">*                                CPC_MSG_T_TXERR_CNT</span>
<a name="l00054"></a>00054 <span class="comment">*                                CPC_MSG_T_RXERR_CNT</span>
<a name="l00055"></a>00055 <span class="comment">*                              - CPC_CMD_T_CLEAR_TXBUF and friends defined       </span>
<a name="l00056"></a>00056 <span class="comment">*                              - CPC_OVERRUN_T defined                           </span>
<a name="l00057"></a>00057 <span class="comment">* 01.74    16.11.2004  CS      - added a new error value:</span>
<a name="l00058"></a>00058 <span class="comment">*                                CPC_ERR_OP_SYS_NOT_SUPPORTED</span>
<a name="l00059"></a>00059 <span class="comment">*                                signals when an operating system is not</span>
<a name="l00060"></a>00060 <span class="comment">*                                supported</span>
<a name="l00061"></a>00061 <span class="comment">* 01.75    23.12.2004  CS      - CPC_MSG_LEN can now be defined by the</span>
<a name="l00062"></a>00062 <span class="comment">*                                programmer. If not defined, the default</span>
<a name="l00063"></a>00063 <span class="comment">*                                value is set to 64 byte</span>
<a name="l00064"></a>00064 <span class="comment">* 01.76    17.03.2005  CS      - added type CPC_CAN_ERROR_T that holds</span>
<a name="l00065"></a>00065 <span class="comment">*                                information on the bus state</span>
<a name="l00066"></a>00066 <span class="comment">*                              - added CONTR_Busstate that allows to</span>
<a name="l00067"></a>00067 <span class="comment">*                                monitor the bus state using CPC_Control</span>
<a name="l00068"></a>00068 <span class="comment">*                              - added error codes for the dynamical loading</span>
<a name="l00069"></a>00069 <span class="comment">*                                of the library</span>
<a name="l00070"></a>00070 <span class="comment">*                              - added CPC_OVERRUN_T that monitors</span>
<a name="l00071"></a>00071 <span class="comment">*                                overruns on the CAN bus</span>
<a name="l00072"></a>00072 <span class="comment">*                              - added CONTR_CmdQueue that allows to use a </span>
<a name="l00073"></a>00073 <span class="comment">*                                command queue instead of sending messages</span>
<a name="l00074"></a>00074 <span class="comment">*                                directly to the interface</span>
<a name="l00075"></a>00075 <span class="comment">* 01.77    24.03.2005  CS      - modified the compiler switch determining</span>
<a name="l00076"></a>00076 <span class="comment">*                                the running operating system</span>
<a name="l00077"></a>00077 <span class="comment">*                                _WIN32: a Windows OS is running</span>
<a name="l00078"></a>00078 <span class="comment">*                                else  : a Linux OS is running</span>
<a name="l00079"></a>00079 <span class="comment">*                              - added a compiler switch for the</span>
<a name="l00080"></a>00080 <span class="comment">*                                CHAN_PARAMS type only needed in Linux</span>
<a name="l00081"></a>00081 <span class="comment">* 01.78    12.04.2005  GU      - CPC_ERR_COUNTER_T defined and used</span>
<a name="l00082"></a>00082 <span class="comment">*                      </span>
<a name="l00083"></a>00083 <span class="comment">*****************************************************************************/</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="preprocessor">#ifndef CPC_HEADER</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#define CPC_HEADER</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 <span class="comment">// the maximum length of the union members within a CPC_MSG</span>
<a name="l00089"></a>00089 <span class="comment">// this value can be defined by the customer, but has to be</span>
<a name="l00090"></a>00090 <span class="comment">// &gt;= 64 bytes</span>
<a name="l00091"></a>00091 <span class="comment">// however, if not defined before, we set a length of 64 byte</span>
<a name="l00092"></a>00092 <span class="preprocessor">#if !defined(CPC_MSG_LEN) || (CPC_MSG_LEN&lt;64)</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">        #undef CPC_MSG_LEN</span>
<a name="l00094"></a><a class="code" href="cpc_8h.html#95cd4bc153375bdff97219348f59427c">00094</a> <span class="preprocessor"></span><span class="preprocessor">        #define CPC_MSG_LEN 64</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00097"></a>00097 <span class="comment">// check the operating system used</span>
<a name="l00098"></a>00098 <span class="preprocessor">#ifdef _WIN32 // running a Windows OS</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span>
<a name="l00100"></a>00100         <span class="comment">// on Windows OS we use a byte alignment of 1</span>
<a name="l00101"></a>00101 <span class="preprocessor">        #pragma pack(push, 1)</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>
<a name="l00103"></a>00103         <span class="comment">// set the calling conventions for the library function calls</span>
<a name="l00104"></a>00104 <span class="preprocessor">        #define CALL_CONV __stdcall</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span>
<a name="l00106"></a>00106 <span class="preprocessor">#else</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span>
<a name="l00108"></a>00108         <span class="comment">// Linux does not use this calling convention</span>
<a name="l00109"></a><a class="code" href="cpc_8h.html#66285a1fe575693f5f275b212891222e">00109</a> <span class="preprocessor">        #define CALL_CONV</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>
<a name="l00111"></a>00111 <span class="preprocessor">#endif</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span>
<a name="l00113"></a>00113 <span class="comment">// Transmission of events from CPC interfaces to PC can be individually </span>
<a name="l00114"></a>00114 <span class="comment">// controlled per event type. Default state is: don't transmit</span>
<a name="l00115"></a>00115 <span class="comment">// Control values are constructed by bit-or of Subject and Action</span>
<a name="l00116"></a>00116 <span class="comment">// and passed to CPC_Control()</span>
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 <span class="comment">// Control-Values for CPC_Control() Command Subject Selection</span>
<a name="l00119"></a><a class="code" href="cpc_8h.html#2c8a159c26408e54710388d82c4fbb57">00119</a> <span class="preprocessor">#define CONTR_CAN_Message 0x04</span>
<a name="l00120"></a><a class="code" href="cpc_8h.html#17372fd46d46c4ac49354ef347b36350">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_Busload     0x08</span>
<a name="l00121"></a><a class="code" href="cpc_8h.html#541b39f90e4104476a8223f12157ab26">00121</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_CAN_State   0x0C</span>
<a name="l00122"></a><a class="code" href="cpc_8h.html#53afd4252d1949fa1a64872fe81ef84d">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_SendAck     0x10</span>
<a name="l00123"></a><a class="code" href="cpc_8h.html#f86db83fea2520d9a065565048a8e7bc">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_Filter      0x14</span>
<a name="l00124"></a><a class="code" href="cpc_8h.html#3e38ffcfa37bf0de9e336826ef47c892">00124</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_CmdQueue    0x18  // reserved, do not use</span>
<a name="l00125"></a><a class="code" href="cpc_8h.html#c65ec22df57fed3d1b57a96b506ad557">00125</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_BusError    0x1C</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>
<a name="l00127"></a>00127 <span class="comment">// Control Command Actions</span>
<a name="l00128"></a><a class="code" href="cpc_8h.html#1588c5704a309adfa1e6816b91ccf363">00128</a> <span class="preprocessor">#define CONTR_CONT_OFF  0</span>
<a name="l00129"></a><a class="code" href="cpc_8h.html#3bfabdf9e50d26b2bb8b6d9d422b0b84">00129</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_CONT_ON           1</span>
<a name="l00130"></a><a class="code" href="cpc_8h.html#050b783e6b6e94f3f6fbb044206ee1e5">00130</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTR_SING_ON           2</span>
<a name="l00131"></a>00131 <span class="preprocessor"></span><span class="comment">// CONTR_SING_ON doesn't change CONTR_CONT_ON state, so it should be</span>
<a name="l00132"></a>00132 <span class="comment">// read as: transmit at least once</span>
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 <span class="comment">// defines for confirmed request</span>
<a name="l00135"></a><a class="code" href="cpc_8h.html#0e2fa936da206fa452e2879cf8d42350">00135</a> <span class="preprocessor">#define DO_NOT_CONFIRM 0</span>
<a name="l00136"></a><a class="code" href="cpc_8h.html#3e03957c9926a6e4cda44d0d89b73fdd">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_CONFIRM     1</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>
<a name="l00138"></a>00138 <span class="comment">// Messages from CPC to PC contain a message object type field.</span>
<a name="l00139"></a>00139 <span class="comment">// The following message types are sent by CPC and can be used in</span>
<a name="l00140"></a>00140 <span class="comment">// handlers, others should be ignored.</span>
<a name="l00141"></a><a class="code" href="cpc_8h.html#eafe028e5e3a3bd912882713ec3fe217">00141</a> <span class="preprocessor">#define CPC_MSG_T_RESYNC              0         // Normally to be ignored</span>
<a name="l00142"></a><a class="code" href="cpc_8h.html#e80df26ea55a893d7d0c03fb6d7313d2">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CAN           1               // CAN data frame</span>
<a name="l00143"></a><a class="code" href="cpc_8h.html#792414e962747f4353d7f53bf71f7c9d">00143</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_BUSLOAD             2         // Busload message</span>
<a name="l00144"></a><a class="code" href="cpc_8h.html#5a0c6f570a3dc25b317d8fece612cee5">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_STRING              3         // Normally to be ignored</span>
<a name="l00145"></a><a class="code" href="cpc_8h.html#dc870ba396f273c2148d1216729ff6c7">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CONTI               4         // Normally to be ignored</span>
<a name="l00146"></a><a class="code" href="cpc_8h.html#482cb77ee37c23353c8783fe0d65669b">00146</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_MEM             7             // Normally not to be handled</span>
<a name="l00147"></a><a class="code" href="cpc_8h.html#80d17d53582221c0371570c54abd5638">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_RTR             8             // CAN remote frame</span>
<a name="l00148"></a><a class="code" href="cpc_8h.html#3dd6e78c9ecc45d6ccb7142a5ad71e9e">00148</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_TXACK         9               // Send acknowledge</span>
<a name="l00149"></a><a class="code" href="cpc_8h.html#3458173f24ba0a1276def45ad0733d78">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_POWERUP            10         // Power-up message</span>
<a name="l00150"></a><a class="code" href="cpc_8h.html#354f052a4562afc82614fd5aa6ead9b8">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CMD_NO             11         // Normally to be ignored</span>
<a name="l00151"></a><a class="code" href="cpc_8h.html#58c9d5ff6d182eac9ddd526105495d01">00151</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CAN_PRMS     12               // Actual CAN parameters</span>
<a name="l00152"></a><a class="code" href="cpc_8h.html#f7d78be7b9365c16e03c099f36a12db3">00152</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_ABORTED      13               // Command aborted message</span>
<a name="l00153"></a><a class="code" href="cpc_8h.html#65c40d4e564ab76ec70fb42a30bc8a8c">00153</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CANSTATE     14               // CAN state message</span>
<a name="l00154"></a><a class="code" href="cpc_8h.html#1801224046f9f27625063a5ddd56cfd6">00154</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_RESET        15               // used to reset CAN-Controller</span>
<a name="l00155"></a><a class="code" href="cpc_8h.html#77ea7c6fef6501478065a96b05ecfefe">00155</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_XCAN               16         // XCAN data frame</span>
<a name="l00156"></a><a class="code" href="cpc_8h.html#53323a164cc9d7aeba2d543685d16f63">00156</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_XRTR         17               // XCAN remote frame</span>
<a name="l00157"></a><a class="code" href="cpc_8h.html#9727a68b8995f7ff0b7b1583266443f0">00157</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_INFO         18               // information strings</span>
<a name="l00158"></a><a class="code" href="cpc_8h.html#ef3cd518c7ac741965b664f6e0d09ec6">00158</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CONTROL      19       // used for control of</span>
<a name="l00159"></a>00159 <span class="preprocessor"></span>                                    <span class="comment">// interface/driver behaviour</span>
<a name="l00160"></a><a class="code" href="cpc_8h.html#67f0862be37c9f3bc21e4f0d5a596800">00160</a> <span class="preprocessor">#define CPC_MSG_T_CONFIRM      20   // response type for confirmed requests</span>
<a name="l00161"></a><a class="code" href="cpc_8h.html#6239e13295e0491927c32030507b0b43">00161</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_OVERRUN      21   // response type for overrun conditions</span>
<a name="l00162"></a><a class="code" href="cpc_8h.html#976e7e0a46f2a52db305a45eac890b11">00162</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_KEEPALIVE    22   // response type for keep alive conditions</span>
<a name="l00163"></a><a class="code" href="cpc_8h.html#78b963557970c90d3741c8123074ab46">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_CANERROR     23   // response type for bus error conditions</span>
<a name="l00164"></a><a class="code" href="cpc_8h.html#bc039254971e4a0c824a4e06183ef8b3">00164</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_DISCONNECTED 24   // response type for a disconnected interface</span>
<a name="l00165"></a><a class="code" href="cpc_8h.html#83ece8a6b51d4de510a8073237326210">00165</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_MSG_T_ERR_COUNTER  25   // RX/TX error counter of CAN controller</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00167"></a><a class="code" href="cpc_8h.html#18308213025039fc293cfbd50f724b86">00167</a> <span class="preprocessor">#define CPC_MSG_T_FIRMWARE    100   // response type for USB firmware download</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span>
<a name="l00169"></a>00169 <span class="comment">// Messages from the PC to the CPC interface contain a command field</span>
<a name="l00170"></a>00170 <span class="comment">// Most of the command types are wrapped by the library functions and have therefore</span>
<a name="l00171"></a>00171 <span class="comment">// normally not to be used.</span>
<a name="l00172"></a>00172 <span class="comment">// However, programmers who wish to circumvent the library and talk directly</span>
<a name="l00173"></a>00173 <span class="comment">// to the drivers (mainly Linux programmers) can use the following</span>
<a name="l00174"></a>00174 <span class="comment">// command types:</span>
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="cpc_8h.html#4a3295b7792de2586cb1ac092dc57950">00176</a> <span class="preprocessor">#define CPC_CMD_T_CAN                 1   // CAN data frame</span>
<a name="l00177"></a><a class="code" href="cpc_8h.html#b9779f74205d5f3a67d88ab6827f0551">00177</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CONTROL             3   // used for control of interface/driver behaviour</span>
<a name="l00178"></a><a class="code" href="cpc_8h.html#0c691b1bc555709bb9645bda34217090">00178</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CAN_PRMS            6   // set CAN parameters</span>
<a name="l00179"></a><a class="code" href="cpc_8h.html#3b500fd5870ef136adef03a7bfecc202">00179</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CLEARBUF            8   // clears input queue; this is depricated,</span>
<a name="l00180"></a>00180 <span class="preprocessor"></span>                                          <span class="comment">// use CPC_CMD_T_CLEAR_MSG_QUEUE instead </span>
<a name="l00181"></a><a class="code" href="cpc_8h.html#a3b6a67af1fb0c88008319cef26bbed7">00181</a> <span class="preprocessor">#define CPC_CMD_T_INQ_CAN_PARMS      11   // inquire actual CAN parameters</span>
<a name="l00182"></a><a class="code" href="cpc_8h.html#764f74824dad4b52ca18532dfd26756b">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_FILTER_PRMS        12   // set filter parameter</span>
<a name="l00183"></a><a class="code" href="cpc_8h.html#a704ac92af53eeea5745d9886d59e5b5">00183</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_RTR                13   // CAN remote frame</span>
<a name="l00184"></a><a class="code" href="cpc_8h.html#a9868d39282426fd6ad9c93af028650b">00184</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CANSTATE           14   // CAN state message</span>
<a name="l00185"></a><a class="code" href="cpc_8h.html#8f88237d162e4ff3b50834a6eed0a032">00185</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_XCAN               15   // XCAN data frame</span>
<a name="l00186"></a><a class="code" href="cpc_8h.html#70f242212c4ddd45d772a209d8295b33">00186</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_XRTR               16   // XCAN remote frame</span>
<a name="l00187"></a><a class="code" href="cpc_8h.html#7411adae88472ed95127ad020cd90614">00187</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_RESET              17   // used to reset CAN-Controller</span>
<a name="l00188"></a><a class="code" href="cpc_8h.html#dcd618caf610e3032afddfeed5df0ced">00188</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_INQ_INFO           18   // miscellanous information strings</span>
<a name="l00189"></a><a class="code" href="cpc_8h.html#2f823fabcec8f8082a3ef52b3ed214b1">00189</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_OPEN_CHAN          19   // open a channel</span>
<a name="l00190"></a><a class="code" href="cpc_8h.html#9c881ec5c4e0b0577aeca479db38c559">00190</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CLOSE_CHAN         20   // close a channel</span>
<a name="l00191"></a><a class="code" href="cpc_8h.html#4ccb6950e96d2a303e8ed1ed0465aa94">00191</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CNTBUF             21   // this is depricated,</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>                                          <span class="comment">// use CPC_CMD_T_INQ_MSG_QUEUE_CNT instead</span>
<a name="l00193"></a><a class="code" href="cpc_8h.html#f98304423cd11a221b81a603e47feb63">00193</a> <span class="preprocessor">#define CPC_CMD_T_CAN_EXIT           200  // exit the CAN (disable interrupts; reset bootrate; reset output_cntr; mode = 1)</span>
<a name="l00194"></a>00194 <span class="preprocessor"></span>
<a name="l00195"></a><a class="code" href="cpc_8h.html#1c41dbca471c9430ec7037f6fb4ff5aa">00195</a> <span class="preprocessor">#define CPC_CMD_T_INQ_MSG_QUEUE_CNT  CPC_CMD_T_CNTBUF  </span>
<a name="l00196"></a>00196 <span class="preprocessor"></span>                                          <span class="comment">// inquires the count of elements</span>
<a name="l00197"></a>00197                                           <span class="comment">// in the message queue</span>
<a name="l00198"></a><a class="code" href="cpc_8h.html#31294f7e49455c029c2d7f4eb60e450f">00198</a> <span class="preprocessor">#define CPC_CMD_T_INQ_ERR_COUNTER    25   // request the CAN controllers error counter</span>
<a name="l00199"></a><a class="code" href="cpc_8h.html#b5551d7044f5101bf172dd0183799ee8">00199</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_CLEAR_MSG_QUEUE    CPC_CMD_T_CLEARBUF</span>
<a name="l00200"></a>00200 <span class="preprocessor"></span>                                          <span class="comment">// clear CPC_MSG queue</span>
<a name="l00201"></a><a class="code" href="cpc_8h.html#b9de666deb744b09e343361eb8fd088b">00201</a> <span class="preprocessor">#define CPC_CMD_T_CLEAR_CMD_QUEUE    28   // clear CPC_CMD queue</span>
<a name="l00202"></a><a class="code" href="cpc_8h.html#fb64d544e2251f3fd49bd6b842d97b27">00202</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_FIRMWARE          100   // reserved, must not be used</span>
<a name="l00203"></a><a class="code" href="cpc_8h.html#8dfe9d34f19a9b237b1ee682539cf050">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CMD_T_USB_RESET         101   // reserved, must not be used</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>
<a name="l00205"></a><a class="code" href="cpc_8h.html#9ae1ab27dd7ca49e01f91bfb206fe207">00205</a> <span class="preprocessor">#define CPC_CMD_T_ABORT             255   // Normally not to be used</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>
<a name="l00207"></a>00207 <span class="comment">// definitions for CPC_MSG_T_INFO</span>
<a name="l00208"></a>00208 <span class="comment">// information sources</span>
<a name="l00209"></a><a class="code" href="cpc_8h.html#7e0e847850e09550593141f88fe5f1bd">00209</a> <span class="preprocessor">#define CPC_INFOMSG_T_UNKNOWN_SOURCE 0</span>
<a name="l00210"></a><a class="code" href="cpc_8h.html#366b56adde8e81aef3fa1905d9c7f047">00210</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_INFOMSG_T_INTERFACE      1</span>
<a name="l00211"></a><a class="code" href="cpc_8h.html#892e50b6e82611c5e79632265f25db2e">00211</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_INFOMSG_T_DRIVER         2</span>
<a name="l00212"></a><a class="code" href="cpc_8h.html#bc04a33583f3a3ed841def4b38ca0f05">00212</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_INFOMSG_T_LIBRARY        3</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>
<a name="l00214"></a>00214 <span class="comment">// information types</span>
<a name="l00215"></a><a class="code" href="cpc_8h.html#05e2ea5e6d8a1530a64c5e83dbe140d2">00215</a> <span class="preprocessor">#define CPC_INFOMSG_T_UNKNOWN_TYPE   0</span>
<a name="l00216"></a><a class="code" href="cpc_8h.html#cde17173ed32afa44fba9a863cfc4c4a">00216</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_INFOMSG_T_VERSION        1</span>
<a name="l00217"></a><a class="code" href="cpc_8h.html#3a3bc34c841ca806c1ebca85cca99be2">00217</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_INFOMSG_T_SERIAL         2</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>
<a name="l00219"></a>00219 <span class="comment">// definitions for controller types</span>
<a name="l00220"></a><a class="code" href="cpc_8h.html#5a2fdbcbddd96bd0fd447e96111304e8">00220</a> <span class="preprocessor">#define PCA82C200   1 // Philips basic CAN controller</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>                      <span class="comment">// replaced by SJA1000</span>
<a name="l00222"></a><a class="code" href="cpc_8h.html#8e1b2399502a730b1d73754a13f904a7">00222</a> <span class="preprocessor">#define SJA1000     2 // Philips basic CAN controller</span>
<a name="l00223"></a><a class="code" href="cpc_8h.html#3a11b8992205986fa249dacafef08a35">00223</a> <span class="preprocessor"></span><span class="preprocessor">#define AN82527     3 // Intel full CAN controller</span>
<a name="l00224"></a><a class="code" href="cpc_8h.html#e9c5a5f0f37ce35e287e4f502415db0c">00224</a> <span class="preprocessor"></span><span class="preprocessor">#define M16C_BASIC  4 // M16C controller running in</span>
<a name="l00225"></a>00225 <span class="preprocessor"></span>                      <span class="comment">// basic CAN (not full CAN) mode</span>
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="comment">// channel open error codes</span>
<a name="l00228"></a><a class="code" href="cpc_8h.html#27aed541d8adb258a85df0e837d7d124">00228</a> <span class="preprocessor">#define CPC_ERR_NO_FREE_CHANNEL            -1   // no more free space within the channel array</span>
<a name="l00229"></a><a class="code" href="cpc_8h.html#4af17fd6a1ac1b3acea44b3aec8a537d">00229</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_CHANNEL_ALREADY_OPEN       -2   // the channel is already open</span>
<a name="l00230"></a><a class="code" href="cpc_8h.html#ef0daa264ab5a433a99e6b81c931b115">00230</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_CHANNEL_NOT_ACTIVE         -3   // access to a channel not active failed</span>
<a name="l00231"></a><a class="code" href="cpc_8h.html#405252119419494bbbb48db1033c3e00">00231</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_DRIVER_PRESENT          -4   // no driver at the location searched by the library</span>
<a name="l00232"></a><a class="code" href="cpc_8h.html#c4866ae150bb2403e8101a3a0fbde56e">00232</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_INIFILE_PRESENT         -5   // the library could not find the inifile</span>
<a name="l00233"></a><a class="code" href="cpc_8h.html#43ce5bd927d0bf79a75deb4b11e52b52">00233</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_WRONG_PARAMETERS           -6   // wrong parameters in the inifile</span>
<a name="l00234"></a><a class="code" href="cpc_8h.html#5a1ddf3bc37df250fcc3ee6005743da3">00234</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_INTERFACE_PRESENT       -7   // 1. The specified interface is not connected</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>                                                <span class="comment">// 2. The interface (mostly CPC-USB) was disconnected upon operation</span>
<a name="l00236"></a><a class="code" href="cpc_8h.html#b95fd057679ec84c2f6f2da61655d979">00236</a> <span class="preprocessor">#define CPC_ERR_NO_MATCHING_CHANNEL        -8   // the driver couldn't find a matching channel</span>
<a name="l00237"></a><a class="code" href="cpc_8h.html#e29ae717cc5f7a348ca8a2778a1145d3">00237</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_BUFFER_AVAILABLE        -9   // the driver couldn't allocate buffer for messages</span>
<a name="l00238"></a><a class="code" href="cpc_8h.html#66537a5dfe157af3eff33f71fc8771ea">00238</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_INTERRUPT               -10  // the requested interrupt couldn't be claimed</span>
<a name="l00239"></a><a class="code" href="cpc_8h.html#d70caf15a0f8dbc350d33046608a0a5c">00239</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_MATCHING_INTERFACE      -11  // no interface type related to this channel was found</span>
<a name="l00240"></a><a class="code" href="cpc_8h.html#64cf021869a7737059da4dc2a547f397">00240</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_RESOURCES               -12  // the requested resources could not be claimed</span>
<a name="l00241"></a><a class="code" href="cpc_8h.html#ca07b4a1a16fefe8f7147c097d1d241d">00241</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_SOCKET                     -13  // error concerning TCP sockets</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span>
<a name="l00243"></a>00243 <span class="comment">// init error codes</span>
<a name="l00244"></a><a class="code" href="cpc_8h.html#b859fe90df4d85a7c1a3f25840252b6c">00244</a> <span class="preprocessor">#define CPC_ERR_WRONG_CONTROLLER_TYPE      -14  // wrong CAN controller type within initialization</span>
<a name="l00245"></a><a class="code" href="cpc_8h.html#840cd1dba3bb1f9c21f174dbd747a8bd">00245</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_RESET_MODE              -15  // the controller could not be set into reset mode</span>
<a name="l00246"></a><a class="code" href="cpc_8h.html#6466eb95f7debb275886cb9a44067d1b">00246</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_NO_CAN_ACCESS              -16  // the CAN controller could not be accessed</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>
<a name="l00248"></a>00248 <span class="comment">// transmit error codes</span>
<a name="l00249"></a><a class="code" href="cpc_8h.html#f7654d64b88ca2e577a310b57e0949e7">00249</a> <span class="preprocessor">#define CPC_ERR_CAN_WRONG_ID               -20  // the provided CAN id is too big</span>
<a name="l00250"></a><a class="code" href="cpc_8h.html#2cb879f550aba33667008ade2cc84fa5">00250</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_CAN_WRONG_LENGTH           -21  // the provided CAN length is too long</span>
<a name="l00251"></a><a class="code" href="cpc_8h.html#94af777473b709c5205690ed961f1ce9">00251</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_CAN_NO_TRANSMIT_BUF        -22  // the transmit buffer was occupied</span>
<a name="l00252"></a><a class="code" href="cpc_8h.html#daaa9231dfe7e6030de50b01d411c97c">00252</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_CAN_TRANSMIT_TIMEOUT       -23  // The message could not be sent within a</span>
<a name="l00253"></a>00253 <span class="preprocessor"></span>                                                <span class="comment">// specified time</span>
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">// other error codes</span>
<a name="l00256"></a><a class="code" href="cpc_8h.html#ec75abd5c05a78d04e136e2b55935ae3">00256</a> <span class="preprocessor">#define CPC_ERR_SERVICE_NOT_SUPPORTED      -30  // the requested service is not supported by the interface</span>
<a name="l00257"></a><a class="code" href="cpc_8h.html#ae99cb932d9911fe268d1044a90d9d4e">00257</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_IO_TRANSFER                -31  // a transmission error down to the driver occurred</span>
<a name="l00258"></a><a class="code" href="cpc_8h.html#afaa4ce5296db692f07b2217a343a8ef">00258</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_TRANSMISSION_FAILED        -32  // a transmission error down to the interface occurred</span>
<a name="l00259"></a><a class="code" href="cpc_8h.html#e6cceab6b4f3c8a861c99a7e7808dcd3">00259</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_TRANSMISSION_TIMEOUT       -33  // a timeout occurred within transmission to the interface</span>
<a name="l00260"></a><a class="code" href="cpc_8h.html#3801331d6fbe2d0ea86a1742358b6e15">00260</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_OP_SYS_NOT_SUPPORTED       -35  // the operating system is not supported</span>
<a name="l00261"></a><a class="code" href="cpc_8h.html#e8b29dbf070a2e380355599ecfe2895f">00261</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_UNKNOWN                    -40  // an unknown error ocurred (mostly IOCTL errors)</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span>
<a name="l00263"></a><a class="code" href="cpc_8h.html#73245f1795efb9e3489b7c05540fd8cb">00263</a> <span class="preprocessor">#define CPC_ERR_LOADING_DLL                -50  // the library 'cpcwin.dll' could not be loaded</span>
<a name="l00264"></a><a class="code" href="cpc_8h.html#0bd32ac84b6d9eadd5e118e97e8c4c99">00264</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_ASSIGNING_FUNCTION         -51  // the specified function could not be assigned</span>
<a name="l00265"></a><a class="code" href="cpc_8h.html#81283e7adae6de1fae8a58a75f9386d0">00265</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_DLL_INITIALIZATION         -52  // the DLL was not initialized correctly</span>
<a name="l00266"></a><a class="code" href="cpc_8h.html#f77b525bf7961f6d309932d3de362ecb">00266</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_MISSING_LICFILE            -55  // the file containing the licenses does not exist</span>
<a name="l00267"></a><a class="code" href="cpc_8h.html#a168bd82513ac0e0107ea8e802112db5">00267</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_ERR_MISSING_LICENSE            -56  // a required license was not found</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span>
<a name="l00269"></a>00269 <span class="comment">// CAN state bit values. Ignore any bits not listed</span>
<a name="l00270"></a><a class="code" href="cpc_8h.html#ab75181025fee874a0312383c07b7560">00270</a> <span class="preprocessor">#define CPC_CAN_STATE_BUSOFF     0x80</span>
<a name="l00271"></a><a class="code" href="cpc_8h.html#724dc61d7d1b885d459d2f193cfe3988">00271</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_CAN_STATE_ERROR      0x40</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>
<a name="l00273"></a>00273 <span class="comment">// Mask to help ignore undefined bits</span>
<a name="l00274"></a><a class="code" href="cpc_8h.html#bb847d2996067808bf246d9d7e8655e2">00274</a> <span class="preprocessor">#define CPC_CAN_STATE_MASK       0xc0</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span>
<a name="l00276"></a>00276 <span class="comment">// CAN-Message representation in a CPC_MSG</span>
<a name="l00277"></a>00277 <span class="comment">// Message object type is CPC_MSG_T_CAN or CPC_MSG_T_RTR</span>
<a name="l00278"></a>00278 <span class="comment">// or CPC_MSG_T_XCAN or CPC_MSG_T_XRTR</span>
<a name="l00279"></a><a class="code" href="structCPC__CAN__MSG.html">00279</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__CAN__MSG.html">CPC_CAN_MSG</a> { 
<a name="l00280"></a><a class="code" href="structCPC__CAN__MSG.html#3f3cebdd28b82a148cf09cd15774df25">00280</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structCPC__CAN__MSG.html#3f3cebdd28b82a148cf09cd15774df25">id</a>;
<a name="l00281"></a><a class="code" href="structCPC__CAN__MSG.html#b5f9e82379780886c6e1d3cff2703878">00281</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__MSG.html#b5f9e82379780886c6e1d3cff2703878">length</a>;
<a name="l00282"></a><a class="code" href="structCPC__CAN__MSG.html#d1f93768fd80eb5514d0430caaf10a79">00282</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__MSG.html#d1f93768fd80eb5514d0430caaf10a79">msg</a>[8];
<a name="l00283"></a>00283 } <a class="code" href="structCPC__CAN__MSG.html">CPC_CAN_MSG_T</a>;
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="comment">// representation of the CAN parameters for the PCA82C200 controller</span>
<a name="l00287"></a><a class="code" href="structCPC__PCA82C200__PARAMS.html">00287</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__PCA82C200__PARAMS.html">CPC_PCA82C200_PARAMS</a> {
<a name="l00288"></a><a class="code" href="structCPC__PCA82C200__PARAMS.html#996337f12d616361826060a63d26768b">00288</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__PCA82C200__PARAMS.html#996337f12d616361826060a63d26768b">acc_code</a>;   <span class="comment">// Acceptance-code for receive, Standard: 0</span>
<a name="l00289"></a><a class="code" href="structCPC__PCA82C200__PARAMS.html#3128619616f7b95d28bcbea59e1f5033">00289</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__PCA82C200__PARAMS.html#3128619616f7b95d28bcbea59e1f5033">acc_mask</a>;   <span class="comment">// Acceptance-mask for receive, Standard: 0xff (everything)</span>
<a name="l00290"></a><a class="code" href="structCPC__PCA82C200__PARAMS.html#94869ed22b57f00d6ed95ffadc8c6f2a">00290</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__PCA82C200__PARAMS.html#94869ed22b57f00d6ed95ffadc8c6f2a">btr0</a>;       <span class="comment">// Bus-timing register 0</span>
<a name="l00291"></a><a class="code" href="structCPC__PCA82C200__PARAMS.html#48cb61090c2509045189d0cbf665cad8">00291</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__PCA82C200__PARAMS.html#48cb61090c2509045189d0cbf665cad8">btr1</a>;       <span class="comment">// Bus-timing register 1</span>
<a name="l00292"></a><a class="code" href="structCPC__PCA82C200__PARAMS.html#a7d3fbf69d3fef96a68c6b5bf44d6bb4">00292</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__PCA82C200__PARAMS.html#a7d3fbf69d3fef96a68c6b5bf44d6bb4">outp_contr</a>; <span class="comment">// Output-control register</span>
<a name="l00293"></a>00293 } <a class="code" href="structCPC__PCA82C200__PARAMS.html">CPC_PCA82C200_PARAMS_T</a>;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="comment">// representation of the CAN parameters for the SJA1000 controller</span>
<a name="l00297"></a><a class="code" href="structCPC__SJA1000__PARAMS.html">00297</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__SJA1000__PARAMS.html">CPC_SJA1000_PARAMS</a> {
<a name="l00298"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#3804f2f7293ef87d7bb6ba75e4ec8b99">00298</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#3804f2f7293ef87d7bb6ba75e4ec8b99">mode</a>;       <span class="comment">// enables single or dual acceptance filtering</span>
<a name="l00299"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#3f5af69e08cdd4a0a8c82efb75d87f46">00299</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#3f5af69e08cdd4a0a8c82efb75d87f46">acc_code0</a>;  <span class="comment">// Acceptance-code for receive, Standard: 0</span>
<a name="l00300"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#9d7826019e4ec946fd5e244dc6c7a439">00300</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#9d7826019e4ec946fd5e244dc6c7a439">acc_code1</a>;
<a name="l00301"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#08ed64417305f563aa95046f2f7a721a">00301</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#08ed64417305f563aa95046f2f7a721a">acc_code2</a>;
<a name="l00302"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#17a5bc62afc2a96eeb9142d11923129e">00302</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#17a5bc62afc2a96eeb9142d11923129e">acc_code3</a>;
<a name="l00303"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#43023a03d37abfd8623e4cffe0726db5">00303</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#43023a03d37abfd8623e4cffe0726db5">acc_mask0</a>;  <span class="comment">// Acceptance-mask for receive, Standard: 0xff (everything)</span>
<a name="l00304"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#2ae261f091c32a683d9e9fab6b986790">00304</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#2ae261f091c32a683d9e9fab6b986790">acc_mask1</a>;
<a name="l00305"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#fd055e3f2f6deff3c758f2d750135ccb">00305</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#fd055e3f2f6deff3c758f2d750135ccb">acc_mask2</a>;
<a name="l00306"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#e6234b4c3eecfb48087342411f99d6ef">00306</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#e6234b4c3eecfb48087342411f99d6ef">acc_mask3</a>;
<a name="l00307"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#04b4d339ee64ff3745dcaf589e655b26">00307</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#04b4d339ee64ff3745dcaf589e655b26">btr0</a>;       <span class="comment">// Bus-timing register 0</span>
<a name="l00308"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#870c7c0945cb882003819cad3d7a5879">00308</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#870c7c0945cb882003819cad3d7a5879">btr1</a>;       <span class="comment">// Bus-timing register 1</span>
<a name="l00309"></a><a class="code" href="structCPC__SJA1000__PARAMS.html#a6f7f47da246525bf95d9813cb79c811">00309</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__PARAMS.html#a6f7f47da246525bf95d9813cb79c811">outp_contr</a>; <span class="comment">// Output-control register</span>
<a name="l00310"></a>00310 } <a class="code" href="structCPC__SJA1000__PARAMS.html">CPC_SJA1000_PARAMS_T</a>;
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="comment">// representation of the CAN parameters for the M16C controller</span>
<a name="l00313"></a>00313 <span class="comment">// in basic CAN mode (means no full CAN)</span>
<a name="l00314"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html">00314</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__M16C__BASIC__PARAMS.html">CPC_M16C_BASIC_PARAMS</a> {
<a name="l00315"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#c6116b6a976b22039f287d88a1f9c8bb">00315</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#c6116b6a976b22039f287d88a1f9c8bb">con0</a>;
<a name="l00316"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#5b6420c09ee74fa547482ac8691e22ff">00316</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#5b6420c09ee74fa547482ac8691e22ff">con1</a>;
<a name="l00317"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#c8f502e35c159b54d6393679e54e6bb1">00317</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#c8f502e35c159b54d6393679e54e6bb1">ctlr0</a>;
<a name="l00318"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#0fed8d79ba067a5256e2dc0c8510ecb3">00318</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#0fed8d79ba067a5256e2dc0c8510ecb3">ctlr1</a>;
<a name="l00319"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#cd177402e87a4d281abcf8b3f10df5ed">00319</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#cd177402e87a4d281abcf8b3f10df5ed">clk</a>;
<a name="l00320"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#a0896454aedc8b9d408a256e8fa44b5a">00320</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#a0896454aedc8b9d408a256e8fa44b5a">acc_std_code0</a>;
<a name="l00321"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#2818f23286f2a84871910443e3f0bc6a">00321</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#2818f23286f2a84871910443e3f0bc6a">acc_std_code1</a>;
<a name="l00322"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#2db22023b06bf6155c0b9ca41b1b6cb3">00322</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#2db22023b06bf6155c0b9ca41b1b6cb3">acc_ext_code0</a>;
<a name="l00323"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#65a9b33c76c596299977230b5787cabf">00323</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#65a9b33c76c596299977230b5787cabf">acc_ext_code1</a>;
<a name="l00324"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#8e75b9f5f7b4159df46d54613d477dc3">00324</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#8e75b9f5f7b4159df46d54613d477dc3">acc_ext_code2</a>;
<a name="l00325"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#3b1035cec9fc6318b00f3b57ccd9d357">00325</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#3b1035cec9fc6318b00f3b57ccd9d357">acc_ext_code3</a>;
<a name="l00326"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#d60ecbb9c4897b54369c680f25b31b1e">00326</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#d60ecbb9c4897b54369c680f25b31b1e">acc_std_mask0</a>;
<a name="l00327"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#376931c1651c62e55a56a24d109cb3eb">00327</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#376931c1651c62e55a56a24d109cb3eb">acc_std_mask1</a>;
<a name="l00328"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#a9fa7c65ad6a1b2328d7cc2a44269980">00328</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#a9fa7c65ad6a1b2328d7cc2a44269980">acc_ext_mask0</a>;
<a name="l00329"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#d8cf33e56ccb20d36b534cf77d5f0053">00329</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#d8cf33e56ccb20d36b534cf77d5f0053">acc_ext_mask1</a>;
<a name="l00330"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#d2ab2f0d2b05a033db3e06bc57273629">00330</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#d2ab2f0d2b05a033db3e06bc57273629">acc_ext_mask2</a>;
<a name="l00331"></a><a class="code" href="structCPC__M16C__BASIC__PARAMS.html#0e85bb90370df5af9e2442d0ac83cc31">00331</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__BASIC__PARAMS.html#0e85bb90370df5af9e2442d0ac83cc31">acc_ext_mask3</a>;
<a name="l00332"></a>00332 } <a class="code" href="structCPC__M16C__BASIC__PARAMS.html">CPC_M16C_BASIC_PARAMS_T</a>;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 <span class="comment">// CAN params message representation</span>
<a name="l00335"></a><a class="code" href="structCPC__CAN__PARAMS.html">00335</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__CAN__PARAMS.html">CPC_CAN_PARAMS</a> {
<a name="l00336"></a><a class="code" href="structCPC__CAN__PARAMS.html#a57b586c63e77f4e226dca0b3e879287">00336</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__PARAMS.html#a57b586c63e77f4e226dca0b3e879287">cc_type</a>;   <span class="comment">// represents the controller type</span>
<a name="l00337"></a>00337   <span class="keyword">union </span>{
<a name="l00338"></a><a class="code" href="structCPC__CAN__PARAMS.html#0b0ddfffdc4ab9d64c4274e8209dac54">00338</a>     <a class="code" href="structCPC__M16C__BASIC__PARAMS.html">CPC_M16C_BASIC_PARAMS_T</a> <a class="code" href="structCPC__CAN__PARAMS.html#0b0ddfffdc4ab9d64c4274e8209dac54">m16c_basic</a>;
<a name="l00339"></a><a class="code" href="structCPC__CAN__PARAMS.html#4e135fe26bed3677f4365f47ea12d969">00339</a>     <a class="code" href="structCPC__SJA1000__PARAMS.html">CPC_SJA1000_PARAMS_T</a>    <a class="code" href="structCPC__CAN__PARAMS.html#4e135fe26bed3677f4365f47ea12d969">sja1000</a>;
<a name="l00340"></a><a class="code" href="structCPC__CAN__PARAMS.html#b63e0fd01aa08fe4b3a95c59fdf8801f">00340</a>     <a class="code" href="structCPC__PCA82C200__PARAMS.html">CPC_PCA82C200_PARAMS_T</a>  <a class="code" href="structCPC__CAN__PARAMS.html#b63e0fd01aa08fe4b3a95c59fdf8801f">pca82c200</a>;
<a name="l00341"></a>00341   } <a class="code" href="structCPC__CAN__PARAMS.html#42702a4aa3dbfdcab08bfcce0a29bd1e">cc_params</a>;
<a name="l00342"></a>00342 } <a class="code" href="structCPC__CAN__PARAMS.html">CPC_CAN_PARAMS_T</a>;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 <span class="comment">// the following structures are slightly different for Windows and Linux</span>
<a name="l00345"></a>00345 <span class="comment">// To be able to use the 'Select' mechanism with Linux the application</span>
<a name="l00346"></a>00346 <span class="comment">// needs to know the devices file desciptor. </span>
<a name="l00347"></a>00347 <span class="comment">// This mechanism is not implemented within Windows and the file descriptor</span>
<a name="l00348"></a>00348 <span class="comment">// is therefore not needed</span>
<a name="l00349"></a>00349 <span class="preprocessor">#ifdef _WIN32</span>
<a name="l00350"></a>00350 <span class="preprocessor"></span>
<a name="l00351"></a>00351   <span class="comment">// CAN init params message representation</span>
<a name="l00352"></a>00352   <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__INIT__PARAMS.html">CPC_INIT_PARAMS</a> {
<a name="l00353"></a>00353     <a class="code" href="structCPC__CAN__PARAMS.html">CPC_CAN_PARAMS_T</a> <a class="code" href="structCPC__INIT__PARAMS.html#fdc49f4cc5d547df103c702ec844460a">canparams</a>;
<a name="l00354"></a>00354   } <a class="code" href="structCPC__INIT__PARAMS.html">CPC_INIT_PARAMS_T</a>;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="preprocessor">#else // Linux</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span>
<a name="l00358"></a>00358   <span class="comment">// CHAN init params representation</span>
<a name="l00359"></a><a class="code" href="structCPC__CHAN__PARAMS.html">00359</a>   <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__CHAN__PARAMS.html">CPC_CHAN_PARAMS</a> {
<a name="l00360"></a><a class="code" href="structCPC__CHAN__PARAMS.html#d28d80a271b87b5a8e3001edc00c3f0d">00360</a>     <span class="keywordtype">int</span> <a class="code" href="structCPC__CHAN__PARAMS.html#d28d80a271b87b5a8e3001edc00c3f0d">fd</a>;
<a name="l00361"></a>00361   } <a class="code" href="structCPC__CHAN__PARAMS.html">CPC_CHAN_PARAMS_T</a>;
<a name="l00362"></a>00362 
<a name="l00363"></a>00363   <span class="comment">// CAN init params message representation</span>
<a name="l00364"></a><a class="code" href="structCPC__INIT__PARAMS.html">00364</a>   <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__INIT__PARAMS.html">CPC_INIT_PARAMS</a> {
<a name="l00365"></a><a class="code" href="structCPC__INIT__PARAMS.html#201bd89539321a5a4b789d63516c8c1b">00365</a>     <a class="code" href="structCPC__CHAN__PARAMS.html">CPC_CHAN_PARAMS_T</a> <a class="code" href="structCPC__INIT__PARAMS.html#201bd89539321a5a4b789d63516c8c1b">chanparams</a>;
<a name="l00366"></a><a class="code" href="structCPC__INIT__PARAMS.html#fdc49f4cc5d547df103c702ec844460a">00366</a>     <a class="code" href="structCPC__CAN__PARAMS.html">CPC_CAN_PARAMS_T</a>  <a class="code" href="structCPC__INIT__PARAMS.html#fdc49f4cc5d547df103c702ec844460a">canparams</a>;
<a name="l00367"></a>00367   } <a class="code" href="structCPC__INIT__PARAMS.html">CPC_INIT_PARAMS_T</a>;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 <span class="preprocessor">#endif</span>
<a name="l00370"></a>00370 <span class="preprocessor"></span>
<a name="l00371"></a>00371 <span class="comment">// structure for confirmed message handling</span>
<a name="l00372"></a><a class="code" href="structCPC__CONFIRM.html">00372</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__CONFIRM.html">CPC_CONFIRM</a> {
<a name="l00373"></a><a class="code" href="structCPC__CONFIRM.html#1422a3649d4bf3753a88ef560b94a359">00373</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CONFIRM.html#1422a3649d4bf3753a88ef560b94a359">result</a>; <span class="comment">// error code</span>
<a name="l00374"></a>00374 } <a class="code" href="structCPC__CONFIRM.html">CPC_CONFIRM_T</a>;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 
<a name="l00377"></a>00377 <span class="comment">// structure for information requests</span>
<a name="l00378"></a><a class="code" href="structCPC__INFO.html">00378</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__INFO.html">CPC_INFO</a> {
<a name="l00379"></a><a class="code" href="structCPC__INFO.html#70493663f535c012be2609a68365f3dc">00379</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__INFO.html#70493663f535c012be2609a68365f3dc">source</a>; <span class="comment">// interface, driver or library</span>
<a name="l00380"></a><a class="code" href="structCPC__INFO.html#d2a4d747e20f8def19755d46b449c1a8">00380</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__INFO.html#d2a4d747e20f8def19755d46b449c1a8">type</a>;   <span class="comment">// version or serial number</span>
<a name="l00381"></a><a class="code" href="structCPC__INFO.html#5d79cd2dfb5578c20c24ceb4dc7fc9a8">00381</a>   <span class="keywordtype">char</span>          <a class="code" href="structCPC__INFO.html#5d79cd2dfb5578c20c24ceb4dc7fc9a8">msg</a>[<a class="code" href="cpc_8h.html#95cd4bc153375bdff97219348f59427c">CPC_MSG_LEN</a>-2]; <span class="comment">// string holding the requested information</span>
<a name="l00382"></a>00382 } <a class="code" href="structCPC__INFO.html">CPC_INFO_T</a>;
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="comment">// OVERRUN ///////////////////////////////////////</span>
<a name="l00385"></a>00385 <span class="comment">// In general two types of overrun may occur.</span>
<a name="l00386"></a>00386 <span class="comment">// A hardware overrun, where the CAN controller</span>
<a name="l00387"></a>00387 <span class="comment">// lost a message, because the interrupt was</span>
<a name="l00388"></a>00388 <span class="comment">// not handled before the next messgae comes in.</span>
<a name="l00389"></a>00389 <span class="comment">// Or a software overrun, where i.e. a received</span>
<a name="l00390"></a>00390 <span class="comment">// message could not be stored in the CPC_MSG</span>
<a name="l00391"></a>00391 <span class="comment">// buffer.</span>
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">// After a software overrun has occurred</span>
<a name="l00394"></a>00394 <span class="comment">// we wait until we have CPC_OVR_GAP slots</span>
<a name="l00395"></a>00395 <span class="comment">// free in the CPC_MSG buffer.</span>
<a name="l00396"></a><a class="code" href="cpc_8h.html#87973a4f4be870a1c44deff4fcf5a3ce">00396</a> <span class="preprocessor">#define CPC_OVR_GAP               10</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span>
<a name="l00398"></a>00398 <span class="comment">// Two types of software overrun may occur.</span>
<a name="l00399"></a>00399 <span class="comment">// A received CAN message or a CAN state event</span>
<a name="l00400"></a>00400 <span class="comment">// can cause an overrun.</span>
<a name="l00401"></a>00401 <span class="comment">// Note: A CPC_CMD which would normally store</span>
<a name="l00402"></a>00402 <span class="comment">// its result immediately in the CPC_MSG</span>
<a name="l00403"></a>00403 <span class="comment">// queue may fail, because the message queue is full.</span>
<a name="l00404"></a>00404 <span class="comment">// This will not generate an overrun message, but</span>
<a name="l00405"></a>00405 <span class="comment">// will halt command execution, until this command</span>
<a name="l00406"></a>00406 <span class="comment">// is able to store its message in the message queue.</span>
<a name="l00407"></a><a class="code" href="cpc_8h.html#3e642c8440dc8013b043bc6af8858244">00407</a> <span class="preprocessor">#define CPC_OVR_EVENT_CAN       0x01</span>
<a name="l00408"></a><a class="code" href="cpc_8h.html#b8d96a7d338ed7336cb40d3a677fc29a">00408</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_OVR_EVENT_CANSTATE  0x02</span>
<a name="l00409"></a><a class="code" href="cpc_8h.html#3ed228674c46bc78a1d20878b74a1b79">00409</a> <span class="preprocessor"></span><span class="preprocessor">#define CPC_OVR_EVENT_BUSERROR  0x04</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span>
<a name="l00411"></a>00411 <span class="comment">// If the CAN controller lost a message</span>
<a name="l00412"></a>00412 <span class="comment">// we indicate it with the highest bit</span>
<a name="l00413"></a>00413 <span class="comment">// set in the count field.</span>
<a name="l00414"></a><a class="code" href="cpc_8h.html#931fc3ae8b1143a36bd5fc406c1c38e6">00414</a> <span class="preprocessor">#define CPC_OVR_HW              0x80</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>
<a name="l00416"></a>00416 <span class="comment">// structure for overrun conditions</span>
<a name="l00417"></a><a class="code" href="structCPC__OVERRUN__T.html">00417</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00418"></a><a class="code" href="structCPC__OVERRUN__T.html#8e65cacad39abc07a9a81d399d50749b">00418</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> event;
<a name="l00419"></a><a class="code" href="structCPC__OVERRUN__T.html#099aa261391d9be13f7faa53d0bb1739">00419</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> count;
<a name="l00420"></a>00420 } <a class="code" href="structCPC__OVERRUN__T.html">CPC_OVERRUN_T</a>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422 <span class="comment">// CAN errors ////////////////////////////////////</span>
<a name="l00423"></a>00423 <span class="comment">// Each CAN controller type has different</span>
<a name="l00424"></a>00424 <span class="comment">// registers to record errors.</span>
<a name="l00425"></a>00425 <span class="comment">// Therefor a structure containing the specific</span>
<a name="l00426"></a>00426 <span class="comment">// errors is set up for each controller here</span>
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 <span class="comment">// SJA1000 error structure</span>
<a name="l00429"></a>00429 <span class="comment">// see the SJA1000 datasheet for detailed</span>
<a name="l00430"></a>00430 <span class="comment">// explanation of the registers</span>
<a name="l00431"></a><a class="code" href="structCPC__SJA1000__CAN__ERROR.html">00431</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__SJA1000__CAN__ERROR.html">CPC_SJA1000_CAN_ERROR</a> {
<a name="l00432"></a><a class="code" href="structCPC__SJA1000__CAN__ERROR.html#7f7e46c3502372e49516927f59acefce">00432</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__CAN__ERROR.html#7f7e46c3502372e49516927f59acefce">ecc</a>;    <span class="comment">// error capture code register</span>
<a name="l00433"></a><a class="code" href="structCPC__SJA1000__CAN__ERROR.html#6b09674b6cf295312cde95906ca6e429">00433</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__CAN__ERROR.html#6b09674b6cf295312cde95906ca6e429">rxerr</a>;  <span class="comment">// RX error counter register</span>
<a name="l00434"></a><a class="code" href="structCPC__SJA1000__CAN__ERROR.html#b7a48a9e6e917614cf843ec193af2b9e">00434</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__SJA1000__CAN__ERROR.html#b7a48a9e6e917614cf843ec193af2b9e">txerr</a>;  <span class="comment">// TX error counter register</span>
<a name="l00435"></a>00435 } <a class="code" href="structCPC__SJA1000__CAN__ERROR.html">CPC_SJA1000_CAN_ERROR_T</a>;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="comment">// M16C error structure</span>
<a name="l00438"></a>00438 <span class="comment">// see the M16C datasheet for detailed</span>
<a name="l00439"></a>00439 <span class="comment">// explanation of the registers</span>
<a name="l00440"></a><a class="code" href="structCPC__M16C__CAN__ERROR.html">00440</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__M16C__CAN__ERROR.html">CPC_M16C_CAN_ERROR</a> {
<a name="l00441"></a><a class="code" href="structCPC__M16C__CAN__ERROR.html#34ffd7dff1c337317d3fbe94bc0e78ee">00441</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__M16C__CAN__ERROR.html#34ffd7dff1c337317d3fbe94bc0e78ee">tbd</a>; <span class="comment">// to be defined</span>
<a name="l00442"></a>00442 } <a class="code" href="structCPC__M16C__CAN__ERROR.html">CPC_M16C_CAN_ERROR_T</a>;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444 <span class="comment">// structure for CAN error conditions</span>
<a name="l00445"></a><a class="code" href="cpc_8h.html#15bfd9678b05c11ab38871afe0e30fdb">00445</a> <span class="preprocessor">#define  CPC_CAN_ECODE_ERRFRAME   0x01</span>
<a name="l00446"></a><a class="code" href="structCPC__CAN__ERROR.html">00446</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__CAN__ERROR.html">CPC_CAN_ERROR</a> {
<a name="l00447"></a><a class="code" href="structCPC__CAN__ERROR.html#922cb25963258c868c4c474c1f0e0eb9">00447</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__ERROR.html#922cb25963258c868c4c474c1f0e0eb9">ecode</a>;
<a name="l00448"></a>00448   <span class="keyword">struct </span>{
<a name="l00449"></a><a class="code" href="structCPC__CAN__ERROR.html#879199497b26aa5a5652439a75669646">00449</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__ERROR.html#879199497b26aa5a5652439a75669646">cc_type</a>;      <span class="comment">// CAN controller type</span>
<a name="l00450"></a>00450     <span class="keyword">union </span>{
<a name="l00451"></a><a class="code" href="structCPC__CAN__ERROR.html#31751f4272ffe08cfea717d5cbcf430c">00451</a>       <a class="code" href="structCPC__SJA1000__CAN__ERROR.html">CPC_SJA1000_CAN_ERROR_T</a> <a class="code" href="structCPC__CAN__ERROR.html#31751f4272ffe08cfea717d5cbcf430c">sja1000</a>;
<a name="l00452"></a><a class="code" href="structCPC__CAN__ERROR.html#692db046f3ebbe3d44e08261654cc577">00452</a>       <a class="code" href="structCPC__M16C__CAN__ERROR.html">CPC_M16C_CAN_ERROR_T</a>    <a class="code" href="structCPC__CAN__ERROR.html#692db046f3ebbe3d44e08261654cc577">m16c</a>;
<a name="l00453"></a>00453     }<a class="code" href="structCPC__CAN__ERROR.html#10fb66cdde019ddaf4ad7bfdcdbec6ec">regs</a>;
<a name="l00454"></a>00454   }<a class="code" href="structCPC__CAN__ERROR.html#64ec88c50b46849a9e9e60938597d325">cc</a>;
<a name="l00455"></a>00455 } <a class="code" href="structCPC__CAN__ERROR.html">CPC_CAN_ERROR_T</a>;
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 <span class="comment">// Structure containing RX/TX error counter.</span>
<a name="l00458"></a>00458 <span class="comment">// This structure is used to request the </span>
<a name="l00459"></a>00459 <span class="comment">// values of the CAN controllers TX and RX</span>
<a name="l00460"></a>00460 <span class="comment">// error counter.</span>
<a name="l00461"></a><a class="code" href="structCPC__CAN__ERR__COUNTER.html">00461</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__CAN__ERR__COUNTER.html">CPC_CAN_ERR_COUNTER</a> {
<a name="l00462"></a><a class="code" href="structCPC__CAN__ERR__COUNTER.html#52aef51ba0d9c20e48bda3963f95f0ea">00462</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__ERR__COUNTER.html#52aef51ba0d9c20e48bda3963f95f0ea">rx</a>;
<a name="l00463"></a><a class="code" href="structCPC__CAN__ERR__COUNTER.html#64bdb45baaa587bdb7908bbac120fd98">00463</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__CAN__ERR__COUNTER.html#64bdb45baaa587bdb7908bbac120fd98">tx</a>;
<a name="l00464"></a>00464 } <a class="code" href="structCPC__CAN__ERR__COUNTER.html">CPC_CAN_ERR_COUNTER_T</a>;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="comment">/* If this flag is set, transmissions from PC to CPC are protected      */</span>
<a name="l00467"></a>00467 <span class="comment">/* against loss                                                         */</span>
<a name="l00468"></a><a class="code" href="cpc_8h.html#d595d61d5e6518e4e9ce807907b73919">00468</a> <span class="preprocessor">#define CPC_SECURE_TO_CPC       0x01</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>
<a name="l00470"></a>00470 <span class="comment">/* If this flag is set, transmissions from CPC to PC are protected      */</span>
<a name="l00471"></a>00471 <span class="comment">/* against loss                                                         */</span>
<a name="l00472"></a><a class="code" href="cpc_8h.html#508f77846de159d1a0865b2a50ba7cac">00472</a> <span class="preprocessor">#define CPC_SECURE_TO_PC        0x02</span>
<a name="l00473"></a>00473 <span class="preprocessor"></span>
<a name="l00474"></a>00474 <span class="comment">/* If this flag is set, the CAN-transmit buffer is checked to be free   */</span>
<a name="l00475"></a>00475 <span class="comment">/* before sending a message                                             */</span>
<a name="l00476"></a><a class="code" href="cpc_8h.html#39148a74de4c27321156091fbe5090d7">00476</a> <span class="preprocessor">#define CPC_SECURE_SEND         0x04</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span>
<a name="l00478"></a>00478 <span class="comment">/* If this flag is set, the transmission complete flag is checked */</span>
<a name="l00479"></a>00479 <span class="comment">/* after sending a message                                              */</span>
<a name="l00480"></a>00480 <span class="comment">/* THIS IS CURRENTLY ONLY IMPLEMENTED IN THE PASSIVE INTERFACE DRIVERS */</span>
<a name="l00481"></a><a class="code" href="cpc_8h.html#f70c559f7d1d65299489a3f9070d3dcd">00481</a> <span class="preprocessor">#define CPC_SECURE_TRANSMIT     0x08</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span>
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <span class="comment">// main message type used between library and application</span>
<a name="l00485"></a><a class="code" href="structCPC__MSG.html">00485</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCPC__MSG.html">CPC_MSG</a> { 
<a name="l00486"></a><a class="code" href="structCPC__MSG.html#aa0b4df249768d7b98f5b641e305881f">00486</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__MSG.html#aa0b4df249768d7b98f5b641e305881f">type</a>;    <span class="comment">// type of message</span>
<a name="l00487"></a><a class="code" href="structCPC__MSG.html#8c63db741639ed0bca09a3284c1ec2dd">00487</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__MSG.html#8c63db741639ed0bca09a3284c1ec2dd">length</a>;  <span class="comment">// length of data within union 'msg'</span>
<a name="l00488"></a><a class="code" href="structCPC__MSG.html#59acc279d0e2a68dbdd048d7171e044b">00488</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structCPC__MSG.html#59acc279d0e2a68dbdd048d7171e044b">msgid</a>;   <span class="comment">// confirmation handle</span>
<a name="l00489"></a><a class="code" href="structCPC__MSG.html#77a8b46cb8fa206613994b1cbed0d1e3">00489</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structCPC__MSG.html#77a8b46cb8fa206613994b1cbed0d1e3">ts_sec</a>;  <span class="comment">// timestamp in seconds</span>
<a name="l00490"></a><a class="code" href="structCPC__MSG.html#7eca858b6cfddb5e43d1f8ddc0104f1f">00490</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structCPC__MSG.html#7eca858b6cfddb5e43d1f8ddc0104f1f">ts_nsec</a>; <span class="comment">// timestamp in nano seconds</span>
<a name="l00491"></a>00491   <span class="keyword">union </span>{
<a name="l00492"></a><a class="code" href="structCPC__MSG.html#941a8bb8b87b47461c01f5e17b85f8b8">00492</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>         <a class="code" href="structCPC__MSG.html#941a8bb8b87b47461c01f5e17b85f8b8">generic</a>[<a class="code" href="cpc_8h.html#95cd4bc153375bdff97219348f59427c">CPC_MSG_LEN</a>];
<a name="l00493"></a><a class="code" href="structCPC__MSG.html#f96c08ba35b760ae3e409aeeac67883a">00493</a>     <a class="code" href="structCPC__CAN__MSG.html">CPC_CAN_MSG_T</a>         <a class="code" href="structCPC__MSG.html#f96c08ba35b760ae3e409aeeac67883a">canmsg</a>;
<a name="l00494"></a><a class="code" href="structCPC__MSG.html#070bc231b4cd99911cdedec9bf03d8d4">00494</a>     <a class="code" href="structCPC__CAN__PARAMS.html">CPC_CAN_PARAMS_T</a>      <a class="code" href="structCPC__MSG.html#070bc231b4cd99911cdedec9bf03d8d4">canparams</a>;
<a name="l00495"></a><a class="code" href="structCPC__MSG.html#da6654cafc499ce9a1b57bccd3714703">00495</a>     <a class="code" href="structCPC__CONFIRM.html">CPC_CONFIRM_T</a>         <a class="code" href="structCPC__MSG.html#da6654cafc499ce9a1b57bccd3714703">confirmation</a>;
<a name="l00496"></a><a class="code" href="structCPC__MSG.html#fc6d63518d39cb68aa6961c1b02b1c06">00496</a>     <a class="code" href="structCPC__INFO.html">CPC_INFO_T</a>            <a class="code" href="structCPC__MSG.html#fc6d63518d39cb68aa6961c1b02b1c06">info</a>;
<a name="l00497"></a><a class="code" href="structCPC__MSG.html#0e1471b198cb22007157343de6a62ccb">00497</a>     <a class="code" href="structCPC__OVERRUN__T.html">CPC_OVERRUN_T</a>         <a class="code" href="structCPC__MSG.html#0e1471b198cb22007157343de6a62ccb">overrun</a>;
<a name="l00498"></a><a class="code" href="structCPC__MSG.html#09f63db342a236448e0cfc2367e3f004">00498</a>     <a class="code" href="structCPC__CAN__ERROR.html">CPC_CAN_ERROR_T</a>       <a class="code" href="structCPC__MSG.html#09f63db342a236448e0cfc2367e3f004">error</a>;
<a name="l00499"></a><a class="code" href="structCPC__MSG.html#59aaadade38f53c5d219c9ea49cb129b">00499</a>     <a class="code" href="structCPC__CAN__ERR__COUNTER.html">CPC_CAN_ERR_COUNTER_T</a> <a class="code" href="structCPC__MSG.html#59aaadade38f53c5d219c9ea49cb129b">err_counter</a>;
<a name="l00500"></a><a class="code" href="structCPC__MSG.html#f0f487d869eefc5639b1a43fb0197ab4">00500</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>         <a class="code" href="structCPC__MSG.html#f0f487d869eefc5639b1a43fb0197ab4">busload</a>;
<a name="l00501"></a><a class="code" href="structCPC__MSG.html#ce75849da5d09276bd39d1983fd8d43f">00501</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>         <a class="code" href="structCPC__MSG.html#ce75849da5d09276bd39d1983fd8d43f">canstate</a>;
<a name="l00502"></a>00502   }<a class="code" href="structCPC__MSG.html#29f8c0c67b87040941a3ab65d63443b1">msg</a>; 
<a name="l00503"></a>00503 }<a class="code" href="structCPC__MSG.html">CPC_MSG_T</a>;
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 <span class="preprocessor">#ifdef _WIN32</span>
<a name="l00506"></a>00506 <span class="preprocessor"></span><span class="preprocessor">  #pragma pack(pop) // reset the byte alignment</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00508"></a>00508 <span class="preprocessor"></span>
<a name="l00509"></a>00509 <span class="preprocessor">#endif  // CPC_HEADER</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu May 31 20:35:32 2007 for ERAEmbeddedRobotArmProject by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
